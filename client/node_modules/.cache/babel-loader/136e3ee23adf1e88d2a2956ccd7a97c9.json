{"ast":null,"code":"import _toConsumableArray from\"/home/edith/Desktop/PI/FT10-PI-Videogames/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/edith/Desktop/PI/FT10-PI-Videogames/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useSelector}from'react-redux';import'./GamesToShow.css';import GameCard from'../GameCard/GameCard.jsx';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function GamesToShow(){var orig=useSelector(function(state){return state.searchOrig;});var inits=useSelector(function(state){return state.initsearch;});var titFiltGames=useSelector(function(state){return state.gamestoshow;});// juegos para mostrar\nvar orderchoice=useSelector(function(state){return state.ordering;});var _useState=useState(null),_useState2=_slicedToArray(_useState,2),ordarr=_useState2[0],setOrdarr=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),pageCount=_useState4[0],setPageCount=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),currentPage=_useState6[0],setCurrentPage=_useState6[1];//inicialmente la primer página\nvar _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),currentPageArr=_useState8[0],setCurrentPArr=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),pages=_useState10[0],setPages=_useState10[1];var PER_PAGE=3;useEffect(function(){function letsorder(arr,op){if(op==='abcCreciente'||op==='abcDecreciente'){arr.sort(function(a,b){if(a.name.toLowerCase()>b.name.toLowerCase())return 1;if(a.name.toLowerCase()<b.name.toLowerCase())return-1;return 0;});if(op==='abcDecreciente')arr.reverse();return arr;}else if(op==='nroCreciente'||op==='nroDecreciente'){arr.sort(function(a,b){return a.rating-b.rating;});if(op==='nroDecreciente')arr.reverse();return arr;}}setOrdarr(null);//limpia\nif(titFiltGames){var arr=titFiltGames;if(orderchoice){letsorder(arr,orderchoice);}setOrdarr(arr);}},[titFiltGames,orderchoice]);useEffect(function(){if(ordarr){var n=ordarr.length;// Nro total de juegos a mostrar\nvar pc=Math.ceil(n/PER_PAGE);// Nro de páginas a mostrar\nsetPageCount(pc);}},[ordarr,PER_PAGE]);useEffect(function(){if(pageCount){// Función que crea botones para cáda página\nvar pagesNumArr=function pagesNumArr(pageCount){var arr=[];for(var i=1;i<=pageCount;i++){arr.push(i);}return arr;};var _pages=pagesNumArr(pageCount);setPages(_pages);}},[pageCount]);useEffect(function(){if(pages){// Función que obtiene el subarreglo de juegos a mostrar según la pagina\n// en la que se encuentre.\nvar inpageshow=function inpageshow(currentPage,perpage,ordarr){var offset=currentPage*perpage;var currentPageArr=ordarr.slice(offset,offset+PER_PAGE);console.log(currentPageArr);setCurrentPArr(_toConsumableArray(currentPageArr));};if(ordarr){console.log('Toy acá 2');inpageshow(currentPage,PER_PAGE,ordarr);}}},[currentPage,PER_PAGE,ordarr,pages]);function handlePrev(){if(currentPage!==0){setCurrentPage(currentPage-1);}}var handleNext=function handleNext(e){console.log(currentPage);console.log(pageCount);if(currentPage<pageCount-1){setCurrentPage(currentPage+1);}};function handlePage(e){setCurrentPage(e.target.value-1);console.log('current page is'+currentPage);}return/*#__PURE__*/_jsx(\"div\",{children:inits&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"cardcont\",children:currentPageArr&&currentPageArr.map(function(g,i){return/*#__PURE__*/ (//source\n_jsx(GameCard,{orig:orig,id:g.id,name:g.name,rating:g.rating,img:g.img_url,genres:g.genres},i));})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p_btn_area\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"p_button\",onClick:handlePrev,children:\"Anterior\"}),pages&&pages.map(function(p,i){return/*#__PURE__*/_jsxs(\"button\",{className:\"op_button\",onClick:handlePage,value:p,children:[\" \",p,\" \"]},i);}),/*#__PURE__*/_jsx(\"button\",{className:\"p_button\",onClick:handleNext,children:\"Siguiente\"})]})]})});}","map":{"version":3,"sources":["/home/edith/Desktop/PI/FT10-PI-Videogames/client/src/components/GamesToShow/GamesToShow.jsx"],"names":["React","useState","useEffect","useSelector","GameCard","GamesToShow","orig","state","searchOrig","inits","initsearch","titFiltGames","gamestoshow","orderchoice","ordering","ordarr","setOrdarr","pageCount","setPageCount","currentPage","setCurrentPage","currentPageArr","setCurrentPArr","pages","setPages","PER_PAGE","letsorder","arr","op","sort","a","b","name","toLowerCase","reverse","rating","n","length","pc","Math","ceil","pagesNumArr","i","push","inpageshow","perpage","offset","slice","console","log","handlePrev","handleNext","e","handlePage","target","value","map","g","id","img_url","genres","p"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport './GamesToShow.css';\nimport GameCard from '../GameCard/GameCard.jsx';\n\nexport default function GamesToShow() {\n\n  let orig = useSelector(state => state.searchOrig);\n  let inits = useSelector(state => state.initsearch);\n  let titFiltGames = useSelector(state => state.gamestoshow); // juegos para mostrar\n  let orderchoice = useSelector(state => state.ordering);\n\n  let [ordarr, setOrdarr] = useState(null);\n\n  let [pageCount, setPageCount] = useState(null);\n  let [currentPage, setCurrentPage] = useState(0); //inicialmente la primer página\n  let [currentPageArr, setCurrentPArr] = useState([]);\n  let [pages, setPages] = useState(null);\n  let PER_PAGE = 3;\n\n  useEffect(() => {\n    function letsorder(arr, op) {\n      if ((op === 'abcCreciente') || (op === 'abcDecreciente')) {\n        arr.sort(function (a, b) {\n          if (a.name.toLowerCase() > b.name.toLowerCase()) return 1;\n          if (a.name.toLowerCase() < b.name.toLowerCase()) return -1;\n          return 0;\n        });\n        if (op === 'abcDecreciente') arr.reverse();\n        return arr;\n      } else if ((op === 'nroCreciente') || (op === 'nroDecreciente')) {\n        arr.sort((a, b) => a.rating - b.rating);\n        if (op === 'nroDecreciente') arr.reverse();\n        return arr;\n      }\n    }\n    setOrdarr(null); //limpia\n\n    if (titFiltGames) {\n      let arr = titFiltGames;\n      if (orderchoice) {\n        letsorder(arr, orderchoice);\n      }\n      setOrdarr(arr);\n    }\n  }, [titFiltGames, orderchoice])\n\n  useEffect(() => {\n    if (ordarr) {\n      let n = ordarr.length; // Nro total de juegos a mostrar\n      let pc = Math.ceil(n / PER_PAGE); // Nro de páginas a mostrar\n      setPageCount(pc);\n    }\n  }, [ordarr, PER_PAGE])\n\n  useEffect(() => {\n    if (pageCount) {\n      // Función que crea botones para cáda página\n      function pagesNumArr(pageCount) {\n        let arr = [];\n        for (let i = 1; i <= pageCount; i++) {\n          arr.push(i);\n        }\n        return arr;\n      }\n      let pages = pagesNumArr(pageCount);\n      setPages(pages);\n    }\n  }, [pageCount])\n\n  useEffect(() => {\n    if (pages) {\n      // Función que obtiene el subarreglo de juegos a mostrar según la pagina\n      // en la que se encuentre.\n      function inpageshow(currentPage, perpage, ordarr) {\n        let offset = currentPage * perpage;\n        let currentPageArr = ordarr.slice(offset, offset + PER_PAGE)\n        console.log(currentPageArr);\n        setCurrentPArr([...currentPageArr]);\n      }\n\n      if (ordarr) {\n        console.log('Toy acá 2')\n        inpageshow(currentPage, PER_PAGE, ordarr);\n      }\n    }\n  }, [currentPage, PER_PAGE, ordarr, pages])\n\n  function handlePrev() {\n    if (currentPage !== 0) {\n      setCurrentPage(currentPage - 1);\n    }\n  }\n\n  const handleNext = (e) => {\n    console.log(currentPage);\n    console.log(pageCount);\n    if (currentPage < pageCount - 1) {\n      setCurrentPage(currentPage + 1);\n    }\n  }\n\n  function handlePage(e) {\n    setCurrentPage(e.target.value - 1);\n    console.log('current page is' + currentPage);\n  }\n\n  return (\n    <div>\n      {inits && <>\n          <div className=\"cardcont\" >\n          {currentPageArr && currentPageArr.map((g, i) => (//source\n            <GameCard key={i} orig={orig} id={g.id} name={g.name} rating={g.rating} img={g.img_url} genres={g.genres} />\n          ))}\n        </div>\n        <div className=\"p_btn_area\">\n          <button className=\"p_button\" onClick={handlePrev}>Anterior</button>\n          {pages && pages.map((p, i) => (\n            <button key={i} className=\"op_button\" onClick={handlePage} value={p}> {p} </button>\n          ))}\n          <button className=\"p_button\" onClick={handleNext}>Siguiente</button>\n        </div>\n      </>}\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}