{"ast":null,"code":"import _regeneratorRuntime from\"/home/edith/Desktop/PI/FT10-PI-Videogames/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/edith/Desktop/PI/FT10-PI-Videogames/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/edith/Desktop/PI/FT10-PI-Videogames/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useSelector,useDispatch}from'react-redux';import'./CreateForm.css';import MultiSelectPlatform from'../MultiSelectPlatform/MultiSelectPlatform';import MultiSelectGenre from'../MultiSelectGenre/MultiSelectGenre';import NewGenres from'../NewGenres/NewGenres';import NewPlatforms from'../NewPlatforms/NewPlatforms';import{saveNgGenSel,saveNgPlatfSel,addNgPltf,addNgGen,sendedForm}from'../../actions/actions';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CreateForm(props){var dispatch=useDispatch();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),released=_useState4[0],setReleased=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),description=_useState6[0],setDescription=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),rating=_useState8[0],setRating=_useState8[1];function handleChange(e){var nombre=e.target.name;switch(nombre){case'title':setTitle(e.target.value);break;case'released':setReleased(e.target.value);break;case'description':setDescription(e.target.value);break;case'rating':setRating(e.target.value);break;default:break;}}var sended=useSelector(function(state){return state.sended;});var sgenres=useSelector(function(state){return state.nggensel;});var splatforms=useSelector(function(state){return state.ngplatfsel;});var addedg=useSelector(function(state){return state.addedgenres;});var addeptf=useSelector(function(state){return state.addedplatfms;});var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),gameinfo=_useState10[0],setGameinfo=_useState10[1];// Cuando presione 'Guardar' sended se pone en 'true' y recopila todos los datos.\nuseEffect(function(){if(sended){var genres=sgenres;var platforms=splatforms;if(addedg.length!==0){genres=sgenres.concat(addedg);}if(addeptf.length!==0){platforms=splatforms.concat(addeptf);}var gametoadd={title:title,released:released,description:description,rating:rating,genres:genres,platforms:platforms};setGameinfo(gametoadd);}},[sended,title,released,description,rating,sgenres,splatforms,addedg,addeptf]);// Cuando se carga gameinfo lo postea y luego limpia\nuseEffect(function(){if(gameinfo){console.log(gameinfo);alert('juego agregado');axios.post('http://localhost:3001/newvideogame',gameinfo).then(function(resp){console.log(resp.data);});setTitle('');setReleased('');setDescription('');setRating('');dispatch(saveNgGenSel([]));// state.nggensel\ndispatch(saveNgPlatfSel([]));// state.ngplatfsel\ndispatch(addNgGen([]));// state.addedgenres\ndispatch(addNgPltf([]));// state.addedplatfms\ndispatch(sendedForm(false));// state.sended\n}},[gameinfo,dispatch]);var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();//sirve para evitar que refresque la pagina cada vez que apreto una tecla (comportamiento por default)\ndispatch(sendedForm(true));// state.sended = true\ncase 2:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"ng_page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"ng_container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"ng_title\",children:\"Nuevo juego: \"}),/*#__PURE__*/_jsxs(\"form\",{method:\"post\",action:\"http://localhost:3001/newgame\",className:\"ng_formArea\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{id:\"input_name\",type:\"text\",className:\"ng_forminput\",value:title,name:\"title\",placeholder:\"Ingrese el nombre del juego...\",onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{id:\"input_released\",type:\"text\",className:\"ng_forminput\",value:released,name:\"released\",placeholder:\"Fecha de lanzamiento...\",onChange:handleChange}),/*#__PURE__*/_jsx(\"textarea\",{id:\"input_resume\",className:\"ng_textinput\",value:description,name:\"description\",placeholder:\"Breve res\\xFAmen ...\",type:\"text\",onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{id:\"input_rating\",type:\"text\",className:\"ng_forminput\",value:rating,name:\"rating\",placeholder:\"Puntaje...\",onChange:handleChange}),/*#__PURE__*/_jsxs(\"div\",{className:\"ng_selectArea\",children:[/*#__PURE__*/_jsx(MultiSelectPlatform,{}),/*#__PURE__*/_jsx(NewPlatforms,{}),/*#__PURE__*/_jsx(MultiSelectGenre,{}),/*#__PURE__*/_jsx(NewGenres,{})]}),/*#__PURE__*/_jsx(\"div\",{className:\"ng_button-area\",children:/*#__PURE__*/_jsx(\"button\",{className:\"ng_button\",type:\"submit\",children:\"Guardar\"})})]})]})});};","map":{"version":3,"sources":["/home/edith/Desktop/PI/FT10-PI-Videogames/client/src/components/CreateForm/CreateForm.jsx"],"names":["React","useState","useEffect","useSelector","useDispatch","MultiSelectPlatform","MultiSelectGenre","NewGenres","NewPlatforms","saveNgGenSel","saveNgPlatfSel","addNgPltf","addNgGen","sendedForm","axios","CreateForm","props","dispatch","title","setTitle","released","setReleased","description","setDescription","rating","setRating","handleChange","e","nombre","target","name","value","sended","state","sgenres","nggensel","splatforms","ngplatfsel","addedg","addedgenres","addeptf","addedplatfms","gameinfo","setGameinfo","genres","platforms","length","concat","gametoadd","console","log","alert","post","then","resp","data","handleSubmit","event","preventDefault"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport './CreateForm.css';\nimport MultiSelectPlatform from '../MultiSelectPlatform/MultiSelectPlatform';\nimport MultiSelectGenre from '../MultiSelectGenre/MultiSelectGenre';\nimport NewGenres from '../NewGenres/NewGenres';\nimport NewPlatforms from '../NewPlatforms/NewPlatforms';\nimport { saveNgGenSel, saveNgPlatfSel,addNgPltf,addNgGen, sendedForm } from '../../actions/actions';\nimport axios from 'axios';\n\nexport default function CreateForm(props) {\n\n  let dispatch = useDispatch();\n\n  let [title, setTitle] = useState('');\n  let [released, setReleased] = useState('');\n  let [description, setDescription] = useState('');\n  let [rating, setRating] = useState('');\n\n  function handleChange(e) {\n    let nombre = e.target.name;\n    switch (nombre) {\n      case 'title':\n        setTitle(e.target.value);\n        break;\n      case 'released':\n        setReleased(e.target.value);\n        break;\n      case 'description':\n        setDescription(e.target.value);\n        break;\n      case 'rating':\n        setRating(e.target.value);\n        break;\n      default:\n        break;\n    }\n  }\n\n  let sended = useSelector(state => state.sended);\n  let sgenres = useSelector(state => state.nggensel);\n  let splatforms = useSelector(state => state.ngplatfsel);\n  let addedg = useSelector(state => state.addedgenres);\n  let addeptf = useSelector(state => state.addedplatfms);\n\n  let [gameinfo, setGameinfo] = useState(null);\n\n  // Cuando presione 'Guardar' sended se pone en 'true' y recopila todos los datos.\n  useEffect(() => {\n    if (sended) {\n      let genres = sgenres;\n      let platforms = splatforms;\n      if (addedg.length !== 0) {\n        genres = sgenres.concat(addedg);\n      }\n      if (addeptf.length !== 0) {\n        platforms = splatforms.concat(addeptf);\n      }\n      let gametoadd = { title, released, description, rating, genres, platforms };\n      setGameinfo(gametoadd);\n    }\n  }, [sended, title, released, description, rating, sgenres, splatforms, addedg, addeptf])\n\n  // Cuando se carga gameinfo lo postea y luego limpia\n  useEffect(() => {\n    if (gameinfo) {\n      console.log(gameinfo);\n      alert('juego agregado');\n      axios.post('http://localhost:3001/newvideogame', gameinfo)\n        .then(resp => {\n          console.log(resp.data);\n        })\n\n      setTitle('');\n      setReleased('');\n      setDescription('');\n      setRating('');\n      dispatch(saveNgGenSel([])); // state.nggensel\n      dispatch(saveNgPlatfSel([])); // state.ngplatfsel\n      dispatch(addNgGen([])); // state.addedgenres\n      dispatch(addNgPltf([])); // state.addedplatfms\n      dispatch(sendedForm(false)); // state.sended\n    }\n  }, [gameinfo,dispatch])\n\n\n  let handleSubmit = async (event) => {\n    event.preventDefault(); //sirve para evitar que refresque la pagina cada vez que apreto una tecla (comportamiento por default)\n    dispatch(sendedForm(true)); // state.sended = true\n  }\n\n\n\n  return (\n    <div className=\"ng_page\">\n      <div className=\"ng_container\">\n        <h1 className=\"ng_title\"  >Nuevo juego: </h1>\n        {/* <form method=\"post\" action=\"http://localhost:3001/newrecipe\" encType = \"multipart / form-data\" className=\"ng_formArea\" onSubmit={handleSubmit}> */}\n        <form method=\"post\" action=\"http://localhost:3001/newgame\" className=\"ng_formArea\" onSubmit={handleSubmit}>\n          <input\n            id=\"input_name\"\n            type=\"text\"\n            className=\"ng_forminput\"\n            value={title}\n            name='title'\n            placeholder=\"Ingrese el nombre del juego...\"\n            onChange={handleChange}>\n          </input>\n          <input\n            id=\"input_released\"\n            type=\"text\"\n            className=\"ng_forminput\"\n            value={released}\n            name='released'\n            placeholder=\"Fecha de lanzamiento...\"\n            onChange={handleChange}>\n          </input>\n          <textarea\n            id=\"input_resume\"\n            className=\"ng_textinput\"\n            value={description}\n            name='description'\n            placeholder=\"Breve resúmen ...\"\n            type=\"text\"\n            onChange={handleChange}>\n          </textarea>\n          <input\n            id=\"input_rating\"\n            type=\"text\"\n            className=\"ng_forminput\"\n            value={rating}\n            name='rating'\n            placeholder=\"Puntaje...\"\n            onChange={handleChange}>\n          </input>\n          <div className=\"ng_selectArea\">\n            <MultiSelectPlatform />\n            <NewPlatforms />\n            <MultiSelectGenre />\n            <NewGenres />\n          </div>\n          <div className=\"ng_button-area\">\n            <button className=\"ng_button\" type=\"submit\">Guardar</button>\n          </div>\n        </form>\n      </div>\n    </div>\n  )\n};"]},"metadata":{},"sourceType":"module"}